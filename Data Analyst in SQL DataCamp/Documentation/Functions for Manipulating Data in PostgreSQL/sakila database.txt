-- Tables

DROP TABLE IF EXISTS "actor";
CREATE TABLE actor (
    actor_id smallint,
    first_name character varying(45),
    last_name character varying(45),
    last_update timestamp);


DROP TABLE IF EXISTS "film";
CREATE TABLE film (
    film_id smallint,
    title character varying(255),
    description text,
    release_year year,
    language_id smallint,
    original_language_id smallint,
    rental_duration smallint DEFAULT 3,
    rental_rate numeric(4,2) DEFAULT 4.99,
    length smallint,
    replacement_cost numeric(5,2) DEFAULT 19.99,
    rating character varying(6),
    last_update timestamp,
    special_features text);


DROP TABLE IF EXISTS "category";
CREATE TABLE category (
    category_id smallint,
    name character varying(25),
    last_update timestamp);


DROP TABLE IF EXISTS "film_actor";
CREATE TABLE film_actor (
    actor_id smallint,
    film_id smallint,
    last_update timestamp);


DROP TABLE IF EXISTS "film_category";
CREATE TABLE film_category (
    film_id smallint,
    category_id smallint,
    last_update timestamp);


DROP TABLE IF EXISTS "address";
CREATE TABLE address (
    address_id smallint,
    address character varying(50),
    address2 character varying(50),
    district character varying(20),
    city_id smallint,
    postal_code character varying(10),
    phone character varying(20),
    last_update timestamp);


DROP TABLE IF EXISTS "city";
CREATE TABLE city (
    city_id smallint,
    city character varying(50),
    country_id smallint,
    last_update timestamp);


DROP TABLE IF EXISTS "country";
CREATE TABLE country (
    country_id smallint,
    country character varying(50),
    last_update timestamp);


DROP TABLE IF EXISTS "customer";
CREATE TABLE customer (
    customer_id smallint,
    store_id smallint,
    first_name character varying(45),
    last_name character varying(45),
    email character varying(50),
    address_id smallint,
    activebool boolean DEFAULT true,
    create_date date DEFAULT ('now'::text)::date,
    last_update timestamp,
    active integer);


DROP TABLE IF EXISTS "inventory";
CREATE TABLE inventory (
    inventory_id smallint,
    film_id smallint,
    store_id smallint,
    last_update timestamp);


DROP TABLE IF EXISTS "language";
CREATE TABLE language (
    language_id smallint,
    name character(20),
    last_update timestamp;


DROP TABLE IF EXISTS "payment";
CREATE TABLE payment (
    payment_id smallint,
    customer_id smallint,
    staff_id smallint,
    rental_id integer,
    amount numeric(5,2),
    payment_date timestamp);


DROP TABLE IF EXISTS "rental";
CREATE TABLE rental (
    rental_id smallint,
    rental_date timestamp,
    inventory_id integer,
    customer_id smallint,
    return_date timestamp,
    staff_id smallint,
    last_update timestamp);


DROP TABLE IF EXISTS "staff";
CREATE TABLE staff (
    staff_id smallint,
    first_name character varying(45),
    last_name character varying(45),
    address_id smallint,
    email character varying(50),
    store_id smallint,
    active boolean DEFAULT true,
    username character varying(16),
    password character varying(40),
    last_update timestamp,
    picture bytea);


DROP TABLE IF EXISTS "store";
CREATE TABLE store (
    store_id smallint,
    manager_staff_id smallint,
    address_id smallint,
    last_update timestamp);


COPY actor
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/07f3929eabddebf4c8023e76c98f3433c1761482/actor.csv"' 
	(DELIMITER ',', FORMAT CSV HEADER);

COPY category
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/c2bd9ce604c840e86b99cc0548dab7cd74948d82/category.csv"' 
	(DELIMITER ',', FORMAT CSV HEADER);
    
COPY address
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/e8b464342e39f69f39c125e7ff015828d61ee67c/address.csv"' 
	(DELIMITER ',', FORMAT CSV HEADER);

COPY customer
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/221a762623570dea23ff791f425046cec54d6b50/customer.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY inventory
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/f3da6d61ec75998b29d0a44159b085e471ffc085/inventory.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY language
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/50fc10f459e5f114a98e9566a5228816386bc95c/language.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY payment
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/305167b3ce3bfd139b0c02d913f5c4fd01218cdf/payment.csv"' 
	(DELIMITER ',', FORMAT CSV);
   
COPY rental
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/667ce066ec766ccf528841bbca592b78fe31c0ee/rental.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY staff
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/2ba5a1d89ae63b8bfee34c5a3c1c82817c974f71/staff.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY store
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/3e601cf0065d53ae5ccf0bafa2fda53b851b3bf4/store.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY film
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/fb3ebab37c96f20f82901265c66e2bb721934cd6/film.txt"' 
	(DELIMITER ',');
    
COPY film_actor
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/cb6ee5c39d707149658251d1687fac4b723c0964/film_actor.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY film_category
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/1b1b6a2132f648b56a655e489c0e36aa144930c6/film_category.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY city
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/6a438b1557af5a414639da931316b558376c052a/city.csv"' 
	(DELIMITER ',', FORMAT CSV);
    
COPY country
    FROM PROGRAM 'curl "https://assets.datacamp.com/production/repositories/4471/datasets/70bc75e82eac8cdd69e6ec5ddd1e37c1fb363619/country.csv"' 
	(DELIMITER ',', FORMAT CSV);